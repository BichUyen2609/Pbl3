<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tổng quan hệ thống - Admin Dashboard</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="dashboard">
        <!-- Sidebar will be included via JavaScript -->
        <div id="sidebar-container"></div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Header will be included via JavaScript -->
            <div id="header-container"></div>

            <!-- Content Area -->
            <main class="content">
                <!-- Stats Cards -->
                <div class="stats-grid">
                    <div class="card stat-card">
                        <div class="stat-content">
                            <div>
                                <p class="stat-title">Tổng người dùng</p>
                                <h3 class="stat-value">2,543</h3>
                                <p class="stat-change">
                                    <i class="fas fa-arrow-up"></i> 12% so với tháng trước
                                </p>
                            </div>
                            <div class="stat-icon blue">
                                <i class="fas fa-users"></i>
                            </div>
                        </div>
                    </div>
                    <div class="card stat-card">
                        <div class="stat-content">
                            <div>
                                <p class="stat-title">Doanh nghiệp</p>
                                <h3 class="stat-value">152</h3>
                                <p class="stat-change">
                                    <i class="fas fa-arrow-up"></i> 8% so với tháng trước
                                </p>
                            </div>
                            <div class="stat-icon green">
                                <i class="fas fa-building"></i>
                            </div>
                        </div>
                    </div>
                    <div class="card stat-card">
                        <div class="stat-content">
                            <div>
                                <p class="stat-title">Bài đăng việc làm</p>
                                <h3 class="stat-value">487</h3>
                                <p class="stat-change">
                                    <i class="fas fa-arrow-up"></i> 15% so với tháng trước
                                </p>
                            </div>
                            <div class="stat-icon amber">
                                <i class="fas fa-briefcase"></i>
                            </div>
                        </div>
                    </div>
                    <div class="card stat-card">
                        <div class="stat-content">
                            <div>
                                <p class="stat-title">Báo cáo chưa xử lý</p>
                                <h3 class="stat-value">12</h3>
                                <p class="stat-change negative">
                                    <i class="fas fa-arrow-up"></i> 3 báo cáo mới
                                </p>
                            </div>
                            <div class="stat-icon red">
                                <i class="fas fa-flag"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Dashboard Grid -->
                <div class="dashboard-grid">
                    <!-- User Growth Chart -->
                    <div class="card">
                        <div class="card-header">
                            <div class="card-header-flex">
                                <h2>Tăng trưởng người dùng</h2>
                                <div class="chart-period-selector">
                                    <button class="btn btn-sm btn-outline active" data-period="week">Tuần</button>
                                    <button class="btn btn-sm btn-outline" data-period="month">Tháng</button>
                                    <button class="btn btn-sm btn-outline" data-period="year">Năm</button>
                                </div>
                            </div>
                        </div>
                        <div class="card-content">
                            <div class="chart-container">
                                <canvas id="userGrowthChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Activities -->
                    <div class="card">
                        <div class="card-header">
                            <h2>Hoạt động gần đây</h2>
                        </div>
                        <div class="card-content">
                            <div class="activity-list">
                                <div class="activity-item">
                                    <div class="activity-icon">
                                        <i class="fas fa-user-plus"></i>
                                    </div>
                                    <div class="activity-details">
                                        <p class="activity-title">Người dùng mới đăng ký</p>
                                        <p class="activity-time">5 phút trước</p>
                                    </div>
                                    <div class="activity-stats">
                                        <p class="activity-value">15</p>
                                        <p class="activity-change">Hôm nay</p>
                                    </div>
                                </div>
                                <div class="activity-item">
                                    <div class="activity-icon">
                                        <i class="fas fa-briefcase"></i>
                                    </div>
                                    <div class="activity-details">
                                        <p class="activity-title">Bài đăng việc làm mới</p>
                                        <p class="activity-time">30 phút trước</p>
                                    </div>
                                    <div class="activity-stats">
                                        <p class="activity-value">8</p>
                                        <p class="activity-change">Hôm nay</p>
                                    </div>
                                </div>
                                <div class="activity-item">
                                    <div class="activity-icon">
                                        <i class="fas fa-building"></i>
                                    </div>
                                    <div class="activity-details">
                                        <p class="activity-title">Doanh nghiệp mới đăng ký</p>
                                        <p class="activity-time">2 giờ trước</p>
                                    </div>
                                    <div class="activity-stats">
                                        <p class="activity-value">3</p>
                                        <p class="activity-change">Hôm nay</p>
                                    </div>
                                </div>
                                <div class="activity-item">
                                    <div class="activity-icon">
                                        <i class="fas fa-flag"></i>
                                    </div>
                                    <div class="activity-details">
                                        <p class="activity-title">Báo cáo mới</p>
                                        <p class="activity-time">3 giờ trước</p>
                                    </div>
                                    <div class="activity-stats">
                                        <p class="activity-value">5</p>
                                        <p class="activity-change">Hôm nay</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Second Row -->
                <div class="dashboard-grid mt-24">
                    <!-- Job Categories Chart -->
                    <div class="card">
                        <div class="card-header">
                            <h2>Phân bố việc làm theo lĩnh vực</h2>
                        </div>
                        <div class="card-content">
                            <div class="chart-container">
                                <canvas id="jobCategoriesChart"></canvas>
                            </div>
                        </div>
                    </div>

                    <!-- Progress Stats -->
                    <div class="card">
                        <div class="card-header">
                            <h2>Mục tiêu tháng</h2>
                        </div>
                        <div class="card-content">
                            <div class="progress-stats">
                                <div class="progress-item">
                                    <div class="progress-header">
                                        <p>Người dùng mới</p>
                                        <p>75%</p>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill blue" style="width: 75%"></div>
                                    </div>
                                </div>
                                <div class="progress-item">
                                    <div class="progress-header">
                                        <p>Doanh nghiệp mới</p>
                                        <p>45%</p>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill green" style="width: 45%"></div>
                                    </div>
                                </div>
                                <div class="progress-item">
                                    <div class="progress-header">
                                        <p>Bài đăng việc làm</p>
                                        <p>90%</p>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill amber" style="width: 90%"></div>
                                    </div>
                                </div>
                                <div class="progress-item">
                                    <div class="progress-header">
                                        <p>Xử lý báo cáo</p>
                                        <p>60%</p>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill red" style="width: 60%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Mobile Overlay -->
    <div id="mobile-overlay" class="mobile-overlay"></div>

    <script src="common.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Load common elements
            loadSidebar();
            loadHeader('Tổng quan hệ thống');
            
            // Set active nav item
            setActiveNavItem('overview');
            
            // Initialize charts
            initCharts();
            
            // Chart period selector
            const periodButtons = document.querySelectorAll('.chart-period-selector button');
            periodButtons.forEach(button => {
                button.addEventListener('click', function() {
                    periodButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Update chart data based on selected period
                    updateChartData(this.getAttribute('data-period'));
                });
            });
        });
        
        function initCharts() {
            // User Growth Chart
            const userGrowthCtx = document.getElementById('userGrowthChart').getContext('2d');
            const userGrowthChart = new Chart(userGrowthCtx, {
                type: 'line',
                data: {
                    labels: ['T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'CN'],
                    datasets: [
                        {
                            label: 'Ứng viên',
                            data: [12, 19, 15, 17, 20, 25, 32],
                            borderColor: '#4661F2',
                            backgroundColor: 'rgba(70, 97, 242, 0.1)',
                            tension: 0.4,
                            fill: true
                        },
                        {
                            label: 'Nhà tuyển dụng',
                            data: [5, 7, 6, 8, 10, 12, 15],
                            borderColor: '#10b981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            tension: 0.4,
                            fill: true
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
            
            // Job Categories Chart
            const jobCategoriesCtx = document.getElementById('jobCategoriesChart').getContext('2d');
            const jobCategoriesChart = new Chart(jobCategoriesCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Công nghệ', 'Tài chính', 'Marketing', 'Giáo dục', 'Y tế', 'Khác'],
                    datasets: [{
                        data: [35, 20, 15, 10, 10, 10],
                        backgroundColor: [
                            '#4661F2',
                            '#10b981',
                            '#f59e0b',
                            '#ef4444',
                            '#8b5cf6',
                            '#6b7280'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                        }
                    }
                }
            });
            
            // Store charts in window object for later access
            window.dashboardCharts = {
                userGrowth: userGrowthChart,
                jobCategories: jobCategoriesChart
            };
        }
        
        function updateChartData(period) {
            const chart = window.dashboardCharts.userGrowth;
            
            // Update chart data based on selected period
            if (period === 'week') {
                chart.data.labels = ['T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'CN'];
                chart.data.datasets[0].data = [12, 19, 15, 17, 20, 25, 32];
                chart.data.datasets[1].data = [5, 7, 6, 8, 10, 12, 15];
            } else if (period === 'month') {
                chart.data.labels = ['Tuần 1', 'Tuần 2', 'Tuần 3', 'Tuần 4'];
                chart.data.datasets[0].data = [45, 65, 80, 95];
                chart.data.datasets[1].data = [20, 30, 35, 40];
            } else if (period === 'year') {
                chart.data.labels = ['T1', 'T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'T8', 'T9', 'T10', 'T11', 'T12'];
                chart.data.datasets[0].data = [150, 180, 210, 250, 300, 350, 400, 450, 500, 550, 600, 650];
                chart.data.datasets[1].data = [50, 60, 70, 80, 90, 100, 110, 120, 130, 140, 145, 152];
            }
            
            chart.update();
        }
    </script>
</body>
</html>