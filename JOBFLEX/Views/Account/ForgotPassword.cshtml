@{
    ViewData["Title"] = "Quên Mật Khẩu";
    Layout = null;
}
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JobFlex - Quên Mật Khẩu</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="~/css/Login.css" asp-append-version="true" />
     <link rel="stylesheet" href="~/css/ForgotPassword.css" asp-append-version="true" />
</head>
<body>
    <div class="container">
        <div class="login-card">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fa-solid fa-briefcase"></i>
                </div>
                <span>JobFlex</span>
            </div>
            
            <a href="@Url.Action("Login", "Account")" class="back-link">
                <i class="fa-solid fa-arrow-left"></i> Về Đăng Nhập
            </a>
            
            <h1>Quên Mật Khẩu</h1>
            <p class="welcome-text">Đừng lo lắng! Vui lòng nhập số điện thoại hoặc email liên kết với tài khoản của bạn.</p>
            
            <div class="steps-indicator">
                <div class="step active">1
                    <span class="step-label">Tài khoản</span>
                </div>
                <div class="step">2
                    <span class="step-label">Xác minh</span>
                </div>
                <div class="step">3
                    <span class="step-label">Đặt lại</span>
                </div>
            </div>
            
            <!-- Step 1: Enter phone/email -->
            <form id="step1-form">
                <div class="form-group">
                    <label for="identifier">Số Điện Thoại</label>
                    <div class="input-with-icon">
                        <i class="fa-solid fa-user"></i>
                        <input type="text" id="identifier" placeholder="Nhập số điện thoại">
                    </div>
                </div>
                
                <button type="button" id="continue-btn" class="sign-in-btn">
                    <span>Tiếp Tục</span>
                    <i class="fa-solid fa-arrow-right"></i>
                </button>
            </form>
            
            <!-- Step 2: Verification (hidden initially) -->
            <div id="step2-section" class="hidden-section">
                <p>Chọn cách nhận mã xác minh:</p>
                
                <div class="method-selection">
                    <div class="method-option">
                        <i class="fa-solid fa-envelope"></i>
                        <h4>Email</h4>
                        <p>Gửi đến e***@@example.com</p>
                    </div>
                   <div class="method-option">
                       <i class="fa-brands fa-facebook"></i>
                       <h4>Facebook</h4>
                       <p>Gửi đến tài khoản Facebook</p>
                   </div>
                </div>
                
                <p>Nhập mã:</p>
                <div class="verification-inputs">
                    <input type="text" maxlength="1" pattern="[0-9]">
                    <input type="text" maxlength="1" pattern="[0-9]">
                    <input type="text" maxlength="1" pattern="[0-9]">
                    <input type="text" maxlength="1" pattern="[0-9]">
                    <input type="text" maxlength="1" pattern="[0-9]">
                    <input type="text" maxlength="1" pattern="[0-9]">
                </div>
                
                <p><a href="#" id="resend-code">Gửi lại mã</a> sau <span id="timer">60</span> giây</p>
                
                <button type="button" id="verify-btn" class="sign-in-btn">
                    <span>Xác Minh</span>
                    <i class="fa-solid fa-check"></i>
                </button>
            </div>
            
            <!-- Step 3: Reset Password (hidden initially) -->
            <div id="step3-section" class="hidden-section">
                <div class="form-group">
                    <label for="new-password">Mật Khẩu Mới</label>
                    <div class="input-with-icon">
                        <i class="fa-solid fa-lock"></i>
                        <input type="password" id="new-password" placeholder="Nhập mật khẩu mới">
                        <button type="button" class="toggle-password">
                            <i class="fa-regular fa-eye"></i>
                        </button>
                    </div>
                    <div class="password-strength">
                        <div class="strength-bar">
                            <div class="strength-level" style="width: 0%"></div>
                        </div>
                        <span class="strength-text">Độ mạnh mật khẩu: Quá yếu</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="confirm-password">Xác Nhận Mật Khẩu</label>
                    <div class="input-with-icon">
                        <i class="fa-solid fa-lock"></i>
                        <input type="password" id="confirm-password" placeholder="Xác nhận mật khẩu">
                    </div>
                </div>
                
                <button type="button" id="reset-btn" class="sign-in-btn">
                    <span>Đặt Lại</span>
                    <i class="fa-solid fa-check-double"></i>
                </button>
            </div>
        </div>
        
        <div class="illustration" id="background-image">
            <div class="overlay"></div>
            
            <div class="particles">
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
            </div>
            
            <div class="illustration-content">
                <h2>Khôi Phục Truy Cập</h2>
                <p>Chúng tôi sẽ giúp bạn truy cập lại tài khoản nhanh và an toàn.</p>
                <div class="testimonial">
                    <div class="quote">
                        <i class="fa-solid fa-quote-left"></i>
                    </div>
                    <p>"The password recovery process was seamless. I was back to job hunting in no time!"</p>
                    <div class="user-info">
                        <div class="avatar">
                            <i class="fa-solid fa-user"></i>
                        </div>
                        <div class="user-details">
                            <h4>Michael Chen</h4>
                            <span>UI/UX Designer</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Toggle password visibility
        document.querySelectorAll('.toggle-password').forEach(button => {
            button.addEventListener('click', function() {
                const passwordInput = this.parentElement.querySelector('input');
                const icon = this.querySelector('i');
                
                if (passwordInput.type === 'password') {
                    passwordInput.type = 'text';
                    icon.classList.remove('fa-eye');
                    icon.classList.add('fa-eye-slash');
                } else {
                    passwordInput.type = 'password';
                    icon.classList.remove('fa-eye-slash');
                    icon.classList.add('fa-eye');
                }
            });
        });
        
        // Handle step navigation
        document.getElementById('continue-btn').addEventListener('click', function() {
            document.getElementById('step1-form').style.display = 'none';
            document.getElementById('step2-section').style.display = 'block';
            
            // Update step indicators
            document.querySelectorAll('.step')[0].classList.remove('active');
            document.querySelectorAll('.step')[0].classList.add('completed');
            document.querySelectorAll('.step')[1].classList.add('active');
            
            // Start countdown timer
            startTimer();
        });
        
        document.getElementById('verify-btn').addEventListener('click', function() {
            document.getElementById('step2-section').style.display = 'none';
            document.getElementById('step3-section').style.display = 'block';
            
            // Update step indicators
            document.querySelectorAll('.step')[1].classList.remove('active');
            document.querySelectorAll('.step')[1].classList.add('completed');
            document.querySelectorAll('.step')[2].classList.add('active');
        });
        
        // Handle verification code inputs
        const verificationInputs = document.querySelectorAll('.verification-inputs input');
        verificationInputs.forEach((input, index) => {
            input.addEventListener('input', function() {
                if (this.value && index < verificationInputs.length - 1) {
                    verificationInputs[index + 1].focus();
                }
            });
            
            input.addEventListener('keydown', function(e) {
                if (e.key === 'Backspace' && !this.value && index > 0) {
                    verificationInputs[index - 1].focus();
                }
            });
        });
        
        // Method selection
        const methodOptions = document.querySelectorAll('.method-option');
        methodOptions.forEach(option => {
            option.addEventListener('click', function() {
                methodOptions.forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
            });
        });
        
        // Password strength meter
        document.getElementById('new-password').addEventListener('input', function() {
            const password = this.value;
            let strength = 0;
            
            // Check length
            if (password.length >= 8) strength += 25;
            
            // Check for numbers
            if (/\d/.test(password)) strength += 25;
            
            // Check for lowercase letters
            if (/[a-z]/.test(password)) strength += 25;
            
            // Check for uppercase or special characters
            if (/[A-Z]/.test(password) || /[^a-zA-Z0-9]/.test(password)) strength += 25;
            
            const strengthBar = document.querySelector('.strength-level');
            const strengthText = document.querySelector('.strength-text');
            
            strengthBar.style.width = strength + '%';
            
            if (strength <= 25) {
                strengthBar.style.backgroundColor = '#EF4444';
                strengthText.textContent = 'Độ mạnh mật khẩu: quá yếu';
            } else if (strength <= 50) {
                strengthBar.style.backgroundColor = '#F59E0B';
                strengthText.textContent = 'Độ mạnh mật khẩu: Yếu';
            } else if (strength <= 75) {
                strengthBar.style.backgroundColor = '#10B981';
                strengthText.textContent = 'Độ mạnh mật khẩu: Tốt';
            } else {
                strengthBar.style.backgroundColor = '#059669';
                strengthText.textContent = 'Độ mạnh mật khẩu: Mạnh';
            }
        });
        
        // Timer functionality
        function startTimer() {
            let seconds = 60;
            const timerElement = document.getElementById('timer');
            const resendLink = document.getElementById('resend-code');
            
            resendLink.style.pointerEvents = 'none';
            resendLink.style.opacity = '0.5';
            
            const interval = setInterval(function() {
                seconds--;
                timerElement.textContent = seconds;
                
                if (seconds <= 0) {
                    clearInterval(interval);
                    resendLink.style.pointerEvents = 'auto';
                    resendLink.style.opacity = '1';
                }
            }, 1000);
            
            resendLink.addEventListener('click', function(e) {
                if (seconds > 0) {
                    e.preventDefault();
                    return;
                }
                
                // Reset timer
                seconds = 60;
                timerElement.textContent = seconds;
                this.style.pointerEvents = 'none';
                this.style.opacity = '0.5';
                
                // Restart timer
                startTimer();
            });
        }
        
        // Add floating animation to buttons
        setInterval(function() {
            const buttons = document.querySelectorAll('.sign-in-btn');
            buttons.forEach(btn => {
                btn.style.boxShadow = '0 4px 12px rgba(37, 99, 235, 0.25)';
                
                setTimeout(function() {
                    btn.style.boxShadow = '0 6px 16px rgba(37, 99, 235, 0.35)';
                }, 1000);
            });
        }, 2000);
    </script>
</body>
</html>