<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script
      src="https://kit.fontawesome.com/64d58efce2.js"
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Add Google Fonts for Poppins with additional weights -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Add jQuery UI for datepicker -->
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="../css/dangky.css" />
    <title>Sign up & Sign in Form</title>
  </head>
  <body>
    <div class="container">
      <div class="forms-container">
        <div class="signin-signup">
          <!-- Sign-up form (Đăng ký) displayed first -->
          <form action="#" class="sign-up-form" id="signupForm">
            <h2 class="title">Đăng ký</h2>
            <div class="form-container">
              <div class="form-step active" id="step1">
                <div class="progress-container">
                  <div class="progress-bar">
                    <div class="progress" style="width: 20%"></div>
                  </div>
                  <div class="step-indicator">
                    <div class="step-dot active"></div>
                    <div class="step-dot"></div>
                    <div class="step-dot"></div>
                    <div class="step-dot"></div>
                    <div class="step-dot"></div>
                  </div>
                </div>
                <div class="name-gender-container">
                  <div class="input-field name-field">
                    <i class="fas fa-user"></i>
                    <input type="text" placeholder="Họ tên" name="fullName" required />
                  </div>
                  <div class="gender-container">
                    <label class="gender-label">
                      <input type="radio" name="gender" value="nam" required />
                      Nam
                    </label>
                    <label class="gender-label">
                      <input type="radio" name="gender" value="nữ" />
                      Nữ
                    </label>
                  </div>
                </div>
                <div class="phone-dob-container">
                  <div class="input-field phone-field">
                    <i class="fas fa-phone"></i>
                    <input type="text" placeholder="SĐT" name="phone" required />
                  </div>
                  <div class="input-field dob-field">
                    <i class="fas fa-calendar"></i>
                    <input type="text" placeholder="mm/dd/yyyy" name="dob" id="dob" required />
                  </div>
                </div>
                <div class="input-field">
                  <i class="fas fa-envelope"></i>
                  <input type="text" placeholder="email/facebook" name="email" required />
                </div>
                
                <div class="input-field">
                  <i class="fas fa-lock"></i>
                  <input type="password" placeholder="Mk" name="password" id="password" required />
                  <i class="fas fa-eye toggle-password" data-target="password"></i>
                </div>
                
                <div class="input-field">
                  <i class="fas fa-lock"></i>
                  <input type="password" placeholder="Nhập lại mk" name="confirmPassword" id="confirmPassword" required />
                  <i class="fas fa-eye toggle-password" data-target="confirmPassword"></i>
                </div>
                <div class="error-message" id="passwordMatchError">Mật khẩu không khớp</div>
                
                <div class="checkbox-field">
                  <input type="checkbox" id="terms" name="terms" required />
                  <label for="terms">Điều khoản</label>
                </div>
                
                <div class="error-message" id="error-message">
                  Vui lòng điền đầy đủ và đúng thông tin bắt buộc!
                </div>
                
                <div class="form-navigation center">
                  <button type="button" class="btn register-step">Tiếp theo</button>
                </div>
              </div>
              <div class="form-step" id="step2">
                <div class="step-header">
                  <a class="skip-link" data-skip="3">Có thể bỏ qua</a>
                  <h3 class="step-title">Nhập mô tả</h3>
                </div>
                
                <div class="progress-container">
                  <div class="progress-bar">
                    <div class="progress" style="width: 40%"></div>
                  </div>
                  <div class="step-indicator">
                    <div class="step-dot active"></div>
                    <div class="step-dot active"></div>
                    <div class="step-dot"></div>
                    <div class="step-dot"></div>
                    <div class="step-dot"></div>
                  </div>
                </div>
                
                <div class="input-field description-field">
                  <i class="fas fa-pen"></i>
                  <textarea placeholder="Mô tả" name="description"></textarea>
                </div>
                
                <div class="form-navigation">
                  <button type="button" class="btn prev-step">Quay lại</button>
                  <button type="button" class="btn next-step">Tiếp theo</button>
                </div>
              </div>
 
              <div class="form-step" id="step3">
                <div class="step-header">
                  <a class="skip-link" data-skip="4">Có thể bỏ qua</a>
                  <h3 class="step-title">Upload CV</h3>
                </div>
                
                <div class="progress-container">
                  <div class="progress-bar">
                    <div class="progress" style="width: 60%"></div>
                  </div>
                  <div class="step-indicator">
                    <div class="step-dot active"></div>
                    <div class="step-dot active"></div>
                    <div class="step-dot active"></div>
                    <div class="step-dot"></div>
                    <div class="step-dot"></div>
                  </div>
                </div>
                
                <div class="input-field">
                  <i class="fas fa-file-upload"></i>
                  <input type="file" placeholder="Upload CV" name="cv" id="cvUpload" />
                </div>
                
                <div class="form-navigation">
                  <button type="button" class="btn prev-step">Quay lại</button>
                  <button type="button" class="btn next-step">Tiếp theo</button>
                </div>
              </div>

              <div class="form-step" id="step4">
                <div class="step-header">
                  <a class="skip-link" data-skip="5">Có thể bỏ qua</a>
                  <h3 class="step-title">Thời gian làm việc</h3>
                </div>
                
                <div class="progress-container">
                  <div class="progress-bar">
                    <div class="progress" style="width: 80%"></div>
                  </div>
                  <div class="step-indicator">
                    <div class="step-dot active"></div>
                    <div class="step-dot active"></div>
                    <div class="step-dot active"></div>
                    <div class="step-dot active"></div>
                    <div class="step-dot"></div>
                  </div>
                </div>
                
                <div class="schedule-table">
                  <table>
                    <thead>
                      <tr>
                        <th></th>
                        <th>Thứ 2</th>
                        <th>Thứ 3</th>
                        <th>Thứ 4</th>
                        <th>Thứ 5</th>
                        <th>Thứ 6</th>
                        <th>Thứ 7</th>
                        <th>CN</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>Sáng</td>
                        <td><input type="checkbox" name="schedule" value="Mon-Morning" /></td>
                        <td><input type="checkbox" name="schedule" value="Tue-Morning" /></td>
                        <td><input type="checkbox" name="schedule" value="Wed-Morning" /></td>
                        <td><input type="checkbox" name="schedule" value="Thu-Morning" /></td>
                        <td><input type="checkbox" name="schedule" value="Fri-Morning" /></td>
                        <td><input type="checkbox" name="schedule" value="Sat-Morning" /></td>
                        <td><input type="checkbox" name="schedule" value="Sun-Morning" /></td>
                      </tr>
                      <tr>
                        <td>Chiều</td>
                        <td><input type="checkbox" name="schedule" value="Mon-Afternoon" /></td>
                        <td><input type="checkbox" name="schedule" value="Tue-Afternoon" /></td>
                        <td><input type="checkbox" name="schedule" value="Wed-Afternoon" /></td>
                        <td><input type="checkbox" name="schedule" value="Thu-Afternoon" /></td>
                        <td><input type="checkbox" name="schedule" value="Fri-Afternoon" /></td>
                        <td><input type="checkbox" name="schedule" value="Sat-Afternoon" /></td>
                        <td><input type="checkbox" name="schedule" value="Sun-Afternoon" /></td>
                      </tr>
                      <tr>
                        <td>Tối</td>
                        <td><input type="checkbox" name="schedule" value="Mon-Evening" /></td>
                        <td><input type="checkbox" name="schedule" value="Tue-Evening" /></td>
                        <td><input type="checkbox" name="schedule" value="Wed-Evening" /></td>
                        <td><input type="checkbox" name="schedule" value="Thu-Evening" /></td>
                        <td><input type="checkbox" name="schedule" value="Fri-Evening" /></td>
                        <td><input type="checkbox" name="schedule" value="Sat-Evening" /></td>
                        <td><input type="checkbox" name="schedule" value="Sun-Evening" /></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                
                <div class="form-navigation">
                  <button type="button" class="btn prev-step">Quay lại</button>
                  <button type="button" class="btn next-step">Tiếp theo</button>
                </div>
              </div>

              <div class="form-step" id="step5">
                <div class="step-header">
                  <span></span>
                  <h3 class="step-title">Thành phố</h3>
                </div>
                
                <div class="progress-container">
                  <div class="progress-bar">
                    <div class="progress" style="width: 100%"></div>
                  </div>
                  <div class="step-indicator">
                    <div class="step-dot active"></div>
                    <div class="step-dot active"></div>
                    <div class="step-dot active"></div>
                    <div class="step-dot active"></div>
                    <div class="step-dot active"></div>
                  </div>
                </div>
                
                <div class="input-field">
                  <i class="fas fa-city"></i>
                  <select name="city" required>
                    <option value="" disabled selected>Thành phố</option>
                    <option value="hanoi">Hà Nội</option>
                    <option value="hcm">TP. Hồ Chí Minh</option>
                    <option value="danang">Đà Nẵng</option>
                    <option value="cantho">Cần Thơ</option>
                    <option value="other">Khác</option>
                  </select>
                </div>
                
                <div class="form-navigation">
                  <button type="button" class="btn prev-step">Quay lại</button>
                  <button type="submit" class="btn solid">Hoàn thành</button>
                </div>
              </div>
            </div>
            
            <p class="social-text">Or Sign up with social platforms</p>
            <div class="social-media">
              <a href="#" class="social-icon">
                <i class="fab fa-facebook-f"></i>
              </a>
              <a href="#" class="social-icon">
                <i class="fab fa-google"></i>
              </a>
            </div>
          </form>

          <!-- Sign-in form (Đăng nhập) displayed second -->
          <form action="#" class="sign-in-form">
            <h2 class="title">Đăng nhập</h2>
            <div class="input-field">
              <i class="fas fa-user"></i>
              <input type="text" placeholder="Username" />
            </div>
            <div class="input-field">
              <i class="fas fa-lock"></i>
              <input type="password" placeholder="Password" id="sign-in-password" />
              <i class="fas fa-eye toggle-password" data-target="sign-in-password"></i>
            </div>
            <input type="submit" value="Đăng nhập" class="btn solid" />
            <p class="social-text">Or Sign in with social platforms</p>
            <div class="social-media">
              <a href="#" class="social-icon">
                <i class="fab fa-facebook-f"></i>
              </a>
              <a href="#" class="social-icon">
                <i class="fab fa-google"></i>
              </a>
            </div>
          </form>
        </div>
      </div>
      
      <div class="panels-container">
        <div class="panel left-panel">
          <div class="content">
            <h3>Welcome back!</h3>
            <p>
                Create an impressive profile and connect with suitable job opportunities.
            </p>
            <p>
                Don't have an account yet?
            </p>
            <button class="btn transparent" id="sign-up-btn">
              Đăng ký
            </button>
          </div>
          <img src="../assets/img/log.svg" class="image" alt="" />
        </div>
        <div class="panel right-panel">
          <div class="content">
            <h3>Welcome to JobFlex!</h3>
            <p>
                Create an impressive profile and connect with suitable job opportunities.
            </p>
            <p>
                Already have an account?
            </p>
            <button class="btn transparent" id="sign-in-btn">
              Đăng nhập
            </button>
          </div>
          <img src="../assets/img/register.svg" class="image" alt="" />
        </div>
      </div>
    </div>
    
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
    <script src="../js/app.js"></script>
    <script>
      $(document).ready(function() {
        // Initialize datepicker
        $("#dob").datepicker({
          dateFormat: "mm/dd/yy",
          changeMonth: true,
          changeYear: true,
          yearRange: "-100:+0",
          maxDate: "-18Y" // Ensure user is at least 18 years old
        });

        let currentStep = 1;
        const totalSteps = 5;

        // Update progress bar
        function updateProgress() {
          const progress = (currentStep / totalSteps) * 100;
          $('.progress').css('width', progress + '%');
          $('.step-dot').removeClass('active');
          $('.step-dot').slice(0, currentStep).addClass('active');
        }

        // Show specific step
        function showStep(step) {
          $('.form-step').removeClass('active');
          $(`#step${step}`).addClass('active');
          currentStep = step;
          updateProgress();
        }

        // Validation functions
        function validatePhone(phone) {
          return /^\d{10,11}$/.test(phone);
        }

        function validateEmailOrFacebook(contact) {
          const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          const fbRegex = /^(https?:\/\/)?(www\.)?facebook\.com\/[a-zA-Z0-9(\.\?)?]/;
          return emailRegex.test(contact) || fbRegex.test(contact);
        }

        function validateStep1() {
          const fullName = $('input[name="fullName"]').val();
          const gender = $('input[name="gender"]:checked').val();
          const phone = $('input[name="phone"]').val();
          const dob = $('input[name="dob"]').val();
          const contact = $('input[name="email"]').val();
          const password = $('input[name="password"]').val();
          const confirmPassword = $('input[name="confirmPassword"]').val();
          const terms = $('input[name="terms"]').is(':checked');

          let errorMessage = '';

          if (!fullName) errorMessage = 'Vui lòng nhập họ tên';
          else if (!gender) errorMessage = 'Vui lòng chọn giới tính';
          else if (!phone || !validatePhone(phone)) errorMessage = 'Số điện thoại phải có 10-11 chữ số';
          else if (!dob) errorMessage = 'Vui lòng chọn ngày sinh';
          else if (!contact || !validateEmailOrFacebook(contact)) errorMessage = 'Email hoặc link Facebook không hợp lệ';
          else if (!password) errorMessage = 'Vui lòng nhập mật khẩu';
          else if (!confirmPassword || password !== confirmPassword) errorMessage = 'Mật khẩu không khớp';
          else if (!terms) errorMessage = 'Vui lòng đồng ý với điều khoản';

          $('#error-message').text(errorMessage).toggle(!!errorMessage);
          return !errorMessage;
        }

        // Real-time password match validation
        $('#confirmPassword').on('input', function() {
          const password = $('#password').val();
          const confirmPassword = $(this).val();
          const error = password !== confirmPassword;
          $('#passwordMatchError').toggle(error);
        });

        // Navigation buttons
        $('.register-step').click(function() {
          if (validateStep1()) {
            showStep(2);
          }
        });

        $('.prev-step').click(function() {
          showStep(currentStep - 1);
        });

        $('.next-step').click(function() {
          if (currentStep === 3) {
            const cv = $('#cvUpload').val();
            if (!cv && !$(this).hasClass('skip')) {
              $('#error-message').text('Vui lòng upload CV hoặc bỏ qua').show();
              return;
            }
          }
          showStep(currentStep + 1);
        });

        $('.skip-link').click(function() {
          const skipTo = $(this).data('skip');
          showStep(skipTo);
        });

        $('form.sign-up-form').submit(function(e) {
          e.preventDefault();
          const city = $('select[name="city"]').val();
          if (!city) {
            $('#error-message').text('Vui lòng chọn thành phố').show();
            return;
          }
          alert('Đăng ký thành công!');
          // window.location.href = 'success.html';
        });

        // Toggle password visibility
        $('.toggle-password').click(function() {
          const target = $(this).data('target');
          const input = $(`#${target}`);
          const type = input.attr('type') === 'password' ? 'text' : 'password';
          input.attr('type', type);
          $(this).toggleClass('fa-eye fa-eye-slash');
        });
      });
    </script>
  </body>
</html>